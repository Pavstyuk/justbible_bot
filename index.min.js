require("dotenv").config();const fs=require("node:fs"),{Bot:Bot,GrammyError:GrammyError,HttpError:HttpError,InputFile:InputFile,InlineKeyboard:InlineKeyboard}=require("grammy"),bot=new Bot(process.env.BOT_API_KEY),titlesArr=["–ë—ã—Ç–∏–µ, –ë—Ç.","–ò—Å—Ö–æ–¥, –ò–¥.","–õ–µ–≤–∏—Ç, –õ–µ–≤–∏—Ç–∞, –õ–≤.","–ß–∏—Å–ª–∞, –ß—Å.","–í—Ç–æ—Ä–æ–∑–∞–∫–æ–Ω–∏–µ, –í—Ç.","–ò–∏—Å—É—Å –ù–∞–≤–∏–Ω, –ò–∏—Å—É—Å–∞ –ù–∞–≤–∏–Ω–∞, –ù–≤.","–°—É–¥—å–∏, –°—É–¥–µ–π, –°–¥.","–†—É—Ñ—å,–†—É—Ñ–∏,–†—Ñ,","1 –¶–∞—Ä—Å—Ç–≤, 1–¶–∞—Ä—Å—Ç–≤, 1–¶–∞—Ä, 1–¶.","2 –¶–∞—Ä—Å—Ç–≤, 2–¶–∞—Ä—Å—Ç–≤, 2–¶–∞—Ä, 2–¶.","3 –¶–∞—Ä—Å—Ç–≤, 3–¶–∞—Ä—Å—Ç–≤, 3–¶–∞—Ä, 3–¶.","4 –¶–∞—Ä—Å—Ç–≤, 4–¶–∞—Ä—Å—Ç–≤, 4–¶–∞—Ä, 4–¶.","1 –ü–∞—Ä–∞–ª–∏–ø–æ–º–µ–Ω–æ–Ω, 1–ü–∞—Ä, 1–ü., 1 –õ–µ—Ç–æ–ø–∏—Å—å, 1–õ–µ—Ç","2 –ü–∞—Ä–∞–ª–∏–ø–æ–º–µ–Ω–æ–Ω, 2–ü–∞—Ä, 2–ü., 2 –õ–µ—Ç–æ–ø–∏—Å—å, 2–õ–µ—Ç","–ï–∑–¥—Ä–∞, –ï–∑–¥—Ä—É, –ï–∑–¥—Ä—ã, –ï–∑–¥.,–ï–∑.","–ù–µ–µ–º–∏—è,–ù–µ–µ–º–∏—é,–ù–µ–µ–º–∏–∏,–ù–º.","–ï—Å—Ñ–∏—Ä—å, –≠—Å—Ñ–∏—Ä—å, –ï—Å—Ñ–∏—Ä–∏, –≠—Å—Ñ–∏—Ä–∏, –ï—Å., –≠—Å.","–ò–æ–≤, –ò–æ–≤–∞, –ò–≤.","–ü—Å–∞–ª—Ç–∏—Ä—å, –ü—Å–∞–ª—Ç—ã—Ä—å, –ü—Å–∞–ª–æ–º, –ü—Å–∞–ª–º—ã, –ü—Å–∞–ª–º–æ–≤, –ü—Å.","–ü—Ä–∏—Ç—á–∏, –ü—Ä–∏—Ç—á–µ–π, –ü—Ä.","–ï–∫–∫–ª–µ—Å–∏–∞—Å—Ç, –ï–∫–∫–ª–µ–∑–∏–∞—Å—Ç, –ï–∫.","–ü–µ—Å–Ω—è –ü–µ—Å–Ω–µ–π, –ü–µ—Å–Ω–∏ –ü–µ—Å–Ω–µ–π, –ü–µ—Å–Ω—é –ü–µ—Å–Ω–µ–π, –ü–µ—Å–Ω.,–ü–Ω.","–ò—Å–∞–∏—è, –ò—Å–∞–π—è, –ò—Å–∞–∏—é,  –ò—Å–∞–∏, –ò—Å.","–ò–µ—Ä–µ–º–∏—è, –ò–µ—Ä–µ–º–∏–∏, –ò–µ—Ä–µ–º–∏—é, –ò—Ä.","–ü–ª–∞—á –ò–µ—Ä–µ–º–∏–∏, –ü–ª.","–ò–µ–∑–µ–∫–∏–∏–ª—å, –ò–µ–∑–µ–∫–∏–∏–ª—è, –ò–∑.","–î–∞–Ω–∏–∏–ª, –î–∞–Ω–∏–∏–ª–∞, –î–Ω.","–û—Å–∏—è, –û—Å–∏–∏, –û—Å–∏—é, –û—Å.","–ò–æ–∏–ª—å, –ò–æ–∏–ª—è, –ò–ª.","–ê–º–æ—Å, –ê–º–æ—Å–∞, –ê–º.","–ê–≤–¥–∏–π, –ê–≤–¥–∏—è, –ê–≤–¥–∏—é, –ê–∏.","–ò–æ–Ω–∞, –ò–æ–Ω—ã, –ò–æ–∞–Ω—É, –ò–æ.","–ú–∏—Ö–µ–π, –ú–∏—Ö–µ—è, –ú—Ö.","–ù–∞—É–º, –ù–∞—É–º–∞, –ù–∞.","–ê–≤–≤–∞–∫—É–º, –ê–≤–≤–∞–∫—É–º–∞, –ê–≤.","–°–æ—Ñ–æ–Ω–∏—è, –°–æ—Ñ–æ–Ω–∏–∏, –°–æ—Ñ–æ–Ω–∏—é, –°—Ñ.","–ê–≥–≥–µ–π, –ê–≥–≥–µ—è, –ê–≥–≥–µ—é, –ê–≥.","–ó–∞—Ö–∞—Ä–∏—è, –ó–∞—Ö–∞—Ä–∏–∏, –ó–∞—Ö–∞—Ä–∏—é, –ó—Ä.","–ú–∞–ª–∞—Ö–∏—è, –ú–∞–ª–∞—Ö–∏–∏, –ú–∞–ª–∞—Ö–∏—é, –ú–ª.","–ú–∞—Ç—Ñ–µ–π, –ú–∞—Ç—Ñ–µ—è, –ú–∞—Ç–≤–µ–π, –ú—Ç., –ú—Ñ.","–ú–∞—Ä–∫, –ú–∞—Ä–∫–∞, –ú–∫., –ú—Ä.","–õ—É–∫–∞, –õ—É–∫–∏, –õ–∫.","–ò–æ–∞–Ω–Ω, –ò–æ–∞–Ω–Ω–∞, –ò–Ω.","–î–µ—è–Ω–∏—è, –î–µ.","–ò–∞–∫–æ–≤, –ò–∞–∫–æ–≤–∞, –ò–∫.","1 –ü–µ—Ç—Ä–∞, 1–ü–µ—Ç—Ä–∞, 1–ü.","2 –ü–µ—Ç—Ä–∞, 2–ü–µ—Ç—Ä–∞, 2–ü","1 –ò–æ–∞–Ω–Ω–∞, 1–ò–æ–∞–Ω–Ω–∞, 1 –ò–Ω, 1–ò–Ω., 1-–µ –ò–æ–∞–Ω, 1–ò.","2 –ò–æ–∞–Ω–Ω–∞, 2–ò–æ–∞–Ω–Ω–∞, 2 –ò–Ω, 2–ò–Ω., 2-–µ –ò–æ–∞–Ω, 2–ò.","3 –ò–æ–∞–Ω–Ω–∞, 3–ò–æ–∞–Ω–Ω–∞, 3 –ò–Ω, 3–ò–Ω., 3-–µ –ò–æ–∞–Ω, 3–ò.","–ò—É–¥–∞, –ò—É–¥—ã, –ò—É–¥—É, –ò—É.","–†–∏–º–ª—è–Ω–∞–º, –†–∏–º., –†–º.","1 –ö–æ—Ä–∏–Ω—Ñ—è–Ω–∞–º, 1–ö–æ—Ä–∏–Ω—Ñ—è–Ω–∞–º, 1–ö–æ—Ä., 1–ö., 1-–µ –ö–æ—Ä–∏–Ω—Ñ—è–Ω–∞–º","2 –ö–æ—Ä–∏–Ω—Ñ—è–Ω–∞–º, 2–ö–æ—Ä–∏–Ω—Ñ—è–Ω–∞–º, 2–ö–æ—Ä., 2–ö., 2-–µ –ö–æ—Ä–∏–Ω—Ñ—è–Ω–∞–º","–ì–∞–ª–∞—Ç–∞–º, –ì–ª.","–ï—Ñ–µ—Å—è–Ω–∞–º, –≠—Ñ–µ—Å—è–Ω–∞–º, –ï—Ñ., –≠—Ñ.","–§–∏–ª–∏–ø–ø–∏–π—Ü–∞–º, –§–ª–ø, –§–ª.","–ö–æ–ª–æ—Å—Å—è–Ω–∞–º, –ö–ª.","1 –§–µ—Å—Å–∞–ª–æ–Ω–∏–∫–∏–π—Ü–∞–º, 1–§–µ—Å—Å–∞–ª–æ–Ω–∏–∫–∏–π—Ü–∞–º, 1-–µ –§–µ—Å, 1-–µ –§–µ—Å., 1–§.","2 –§–µ—Å—Å–∞–ª–æ–Ω–∏–∫–∏–π—Ü–∞–º, 2–§–µ—Å—Å–∞–ª–æ–Ω–∏–∫–∏–π—Ü–∞–º, 2-–µ –§–µ—Å, 2-–µ –§–µ—Å., 2–§.","1 –¢–∏–º–æ—Ñ–µ—é, 1–¢–∏–º–æ—Ñ–µ—é, 1-–µ –¢–∏–º., 1–¢–∏–º., 1–¢.","2 –¢–∏–º–æ—Ñ–µ—é, 2–¢–∏–º–æ—Ñ–µ—é, 2-–µ –¢–∏–º., 2–¢–∏–º., 2–¢.","–¢–∏—Ç—É, –¢–∏—Ç., –¢–∏.","–§–∏–ª–∏–º–æ–Ω—É, –§–ª–º., –§–º.","–ï–≤—Ä–µ—è–º, –ï–≤—Ä., –ï—Ä.","–û—Ç–∫—Ä–æ–≤–µ–Ω–∏–µ, –û—Ç–∫—Ä., –û–∏., –ê–ø–æ–∫–∞–ª–∏–ø—Å–∏—Å, –ê–ø–æ–∫."],books=["–ë—ã—Ç–∏–µ","–ò—Å—Ö–æ–¥","–õ–µ–≤–∏—Ç","–ß–∏—Å–ª–∞","–í—Ç–æ—Ä–æ–∑–∞–∫–æ–Ω–∏–µ","–ò–∏—Å—É—Å –ù–∞–≤–∏–Ω","–°—É–¥—å–∏","–†—É—Ñ—å","1 –¶–∞—Ä—Å—Ç–≤","2 –¶–∞—Ä—Å—Ç–≤","3 –¶–∞—Ä—Å—Ç–≤","4 –¶–∞—Ä—Å—Ç–≤","1 –ü–∞—Ä–∞–ª–∏–ø–æ–º–µ–Ω–æ–Ω","2 –ü–∞—Ä–∞–ª–∏–ø–æ–º–µ–Ω–æ–Ω","–ï–∑–¥—Ä–∞","–ù–µ–µ–º–∏—è","–ï—Å—Ñ–∏—Ä—å","–ò–æ–≤","–ü—Å–∞–ª—Ç–∏—Ä—å","–ü—Ä–∏—Ç—á–∏","–ï–∫–∫–ª–µ—Å–∏–∞—Å—Ç","–ü–µ—Å–Ω—è –ü–µ—Å–Ω–µ–π","–ò—Å–∞–∏—è","–ò–µ—Ä–µ–º–∏—è","–ü–ª–∞—á –ò–µ—Ä–µ–º–∏–∏","–ò–µ–∑–µ–∫–∏–∏–ª—å","–î–∞–Ω–∏–∏–ª","–û—Å–∏—è","–ò–æ–∏–ª—å","–ê–º–æ—Å","–ê–≤–¥–∏–π","–ò–æ–Ω–∞","–ú–∏—Ö–µ–π","–ù–∞—É–º","–ê–≤–≤–∞–∫—É–º","–°–æ—Ñ–æ–Ω–∏—è","–ê–≥–≥–µ–π","–ó–∞—Ö–∞—Ä–∏—è","–ú–∞–ª–∞—Ö–∏—è","–ú–∞—Ç—Ñ–µ–π","–ú–∞—Ä–∫","–õ—É–∫–∞","–ò–æ–∞–Ω–Ω","–î–µ—è–Ω–∏—è","–ò–∞–∫–æ–≤","1 –ü–µ—Ç—Ä–∞","2 –ü–µ—Ç—Ä–∞","1 –ò–æ–∞–Ω–Ω–∞","2 –ò–æ–∞–Ω–Ω–∞","3 –ò–æ–∞–Ω–Ω–∞","–ò—É–¥–∞","–†–∏–º–ª—è–Ω–∞–º","1 –ö–æ—Ä–∏–Ω—Ñ—è–Ω–∞–º","2 –ö–æ—Ä–∏–Ω—Ñ—è–Ω–∞–º","–ì–∞–ª–∞—Ç–∞–º","–ï—Ñ–µ—Å—è–Ω–∞–º","–§–∏–ª–∏–ø–ø–∏–π—Ü–∞–º","–ö–æ–ª–æ—Å—Å—è–Ω–∞–º","1 –§–µ—Å—Å–∞–ª–æ–Ω–∏–∫–∏–π—Ü–∞–º","2 –§–µ—Å—Å–∞–ª–æ–Ω–∏–∫–∏–π—Ü–∞–º","1 –¢–∏–º–æ—Ñ–µ—é","2 –¢–∏–º–æ—Ñ–µ—é","–¢–∏—Ç—É","–§–∏–ª–∏–º–æ–Ω—É","–ï–≤—Ä–µ—è–º","–û—Ç–∫—Ä–æ–≤–µ–Ω–∏–µ"],chaptersArr=[50,40,27,36,34,24,21,4,31,24,22,25,29,36,10,13,10,42,150,31,12,8,66,52,5,48,12,14,3,9,1,4,7,3,3,3,2,14,4,28,16,24,21,28,5,5,3,5,1,1,1,16,16,13,6,6,4,4,5,3,6,4,3,1,13,22];let theBibleRBO;const writeLogFile=(e,r)=>{let t=new Date,a=`date: "${new Intl.DateTimeFormat("ru-RU",{dateStyle:"short",timeStyle:"short"}).format(t)}", userID: ${e.from.id}, user: "${e.from.username}", name: "${e.from.first_name} ${e.from.last_name}", message: "${e.message.text}", event: "${r}"; \r\n`;fs.appendFile("./bot.log",a,(e=>{}))};fetch("https://justbible.ru/json/rbo.json").then((e=>e.json())).then((e=>{theBibleRBO=e}));const getRandomVerse=()=>{let e=(r=0,t=theBibleRBO.length,(Math.random()*(t-r)+r).toFixed(0));var r,t;if(""!=theBibleRBO[e].text){return`<blockquote><i>${`${theBibleRBO[e].text} \r\n\r\n(${theBibleRBO[e].book} ${theBibleRBO[e].chapter}:${theBibleRBO[e].verse})`}</i></blockquote> <a href="${`https://justbible.ru/?trans=rbo&book=${theBibleRBO[e].book}&chapter=${theBibleRBO[e].chapter}&verse=${theBibleRBO[e].verse}`}">–ß–∏—Ç–∞—Ç—å –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ...</a>`}getRandomVerse()};bot.command("start",(async e=>{await e.react("üòç"),await e.reply("<b>–ü—Ä–∏–≤–µ—Ç, —è —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –ü—Ä–æ—Å—Ç–æ –ë–∏–±–ª–∏—è</b> \r\n\r\n–£–º–µ—é —á–µ—Ç—ã—Ä–µ —Ñ—É–Ω–∫—Ü–∏–∏: \n\r\r\n1. –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å–ª—É—á–∞–π–Ω—ã–µ –æ—Ç—Ä—ã–≤–∫–∏ –∏–∑ –ë–∏–±–ª–∏–∏, –∫–æ–º–∞–Ω–¥–∞: /random \r\n\r\n2. –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –æ—Ç—Ä—ã–≤–æ–∫ –∏–∑ –ë–∏–±–ª–∏–∏ –ø–æ –∑–∞–¥–∞–Ω–Ω—ã–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º. –ù–∞–ø—Ä–∏–º–µ—Ä: <i>1 –§–µ—Å—Å 5:18</i> \r\n\r\n3. –í—ã—Å—ã–ª–∞—Ç—å –∞—É–¥–∏–æ –∑–∞–ø–∏—Å–∏ –ë–∏–±–ª–∏–∏ –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–π –∫–Ω–∏–≥–µ –∏ –≥–ª–∞–≤–µ. –ù–∞–ø—Ä–∏–º–µ—Ä: <i>–°–ª—É—à–∞—Ç—å –ü—Å–∞–ª–æ–º 1</i> \r\n\r\n 4. –ò—Å–∫–∞—Ç—å —Ñ—Ä–∞–∑—É –≤ —Ç–µ–∫—Å—Ç–µ –ë–∏–±–ª–∏–∏. –ù–∞–ø—Ä–∏–º–µ—Ä: <i>–õ—é–±–æ–≤—å —Ç–µ—Ä–ø–µ–ª–∏–≤–∞</i> –∏–ª–∏ <i>–ò—Å–∫–∞—Ç—å –ª—é–±–æ–≤—å —Ç–µ—Ä–ø–µ–ª–∏–≤–∞</i>",{parse_mode:"HTML"})})),bot.command("random",(async e=>{await e.react("ü§©"),await e.reply(getRandomVerse(),{parse_mode:"HTML",disable_web_page_preview:!0}),writeLogFile(e,"random")})),bot.command("help",(async e=>{writeLogFile(e,"help"),await e.react("ü§ì");let r=(new InlineKeyboard).url("justbible.ru","https://justbible.ru/");await e.reply('<b>–¢–µ–ª–µ–≥—Ä–∞–º –±–æ—Ç –ü—Ä–æ—Å—Ç–æ –ë–∏–±–ª–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –†—É—Å—Å–∫–∏–π –ü–µ—Ä–µ–≤–æ–¥, –†–ë–û, 2015.</b> \r\n\r\n    <b>1. –ö–∞–∫ —á–∏—Ç–∞—Ç—å?</b>\r\n    –ù–∞–ø–∏—à–∏—Ç–µ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –æ—Ç—Ä—ã–≤–∫–∞ –∏–∑ –ë–∏–±–ª–∏–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ <i>–ò–æ–∞–Ω–Ω 1:1</i> –∏ –±–æ—Ç –≤—ã–¥–∞—Å—Ç —É–∫–∞–∑–∞–Ω–Ω—ã–π —Å—Ç–∏—Ö: –ï–≤–∞–Ω–≥–µ–ª–∏–µ –æ—Ç –ò–æ–∞–Ω–Ω–∞, –≥–ª–∞–≤–∞ 1, —Å—Ç–∏—Ö 1. –î–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –≥–ª–∞–≤—ã –∏ —Å—Ç–∏—Ö–∞ –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è —Å–∏–º–≤–æ–ª –¥–≤–æ–µ—Ç–æ—á–∏–µ –∏–ª–∏ —Ç–æ—á–∫–∞. \r\n\r\n    –ß—Ç–æ–±—ã –≤—ã–≤–µ—Å—Ç–∏ –æ—Ç—Ä—ã–≤–æ–∫ –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å—Ç–∏—Ö–æ–≤ –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ –≤–∏–¥–µ: <i>1 –ö–æ—Ä 13:4-8</i>. \r\n\r\n    –ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Å—Ç–∏—Ö–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é: <i>–ò–æ–∞–Ω–Ω 1:1,14</i>. \r\n\r\n    –î–æ–ø—É—Å–∫–∞–µ—Ç—Å—è —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∫–Ω–∏–≥–∏ –¥–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –±—É–∫–≤, –≤–º–µ—Å—Ç–æ <i>1 –ö–æ—Ä–∏–Ω—Ñ—è–Ω–∞–º</i> –º–æ–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å <i>1 –ö–æ—Ä</i> –∏–ª–∏ <i>1–ö–æ—Ä</i> –∏–ª–∏ –¥–∞–∂–µ <i>1–ö</i>, –∞ –≤–º–µ—Å—Ç–æ <i>–û—Ç–∫—Ä–æ–≤–µ–Ω–∏–µ</i> - <i>–û—Ç–∫—Ä</i> –∏–ª–∏ <i>–û—Ç–∫</i> \r\n\r\n    <b>2. –ö–∞–∫ —Å–ª—É—à–∞—Ç—å?</b>\r\n    –ß—Ç–æ–±—ã –±–æ—Ç –≤—ã—Å–ª–∞–ª –∞—É–¥–∏–æ –∑–∞–ø–∏—Å—å –≥–ª–∞–≤—ã –∏–∑ –ë–∏–±–ª–∏–∏, –Ω–∞—á–Ω–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–ª—é—á–µ–≤–æ–≥–æ —Å–ª–æ–≤–æ–≤–∞ <i>"–°–ª—É—à–∞—Ç—å"</i> (–¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è: <i>"–ó–∞–ø–∏—Å—å", "–ê—É–¥–∏–æ", "–ó–≤—É–∫"</i>), –∑–∞—Ç–µ–º —É–∫–∞–∂–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏ –∏ –Ω–æ–º–µ—Ä –≥–ª–∞–≤—ã —á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª, –Ω–∞–ø—Ä–∏–º–µ—Ä —Ç–∞–∫: <i>"–°–ª—É—à–∞—Ç—å –ü—Ä–∏—Ç—á–∏ 1"</i>. \r\n\r\n    <b>3. –ö–∞–∫ –∏—Å–∫–∞—Ç—å?</b>\r\n    –ß—Ç–æ–±—ã –Ω–∞–π—Ç–∏ –Ω—É–∂–Ω—É—é —Ñ—Ä–∞–∑—É –≤ —Ç–µ–∫—Å—Ç–µ –ë–∏–±–ª–∏–∏ –ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏—Ç–µ —ç—Ç—É —Ñ—Ä–∞–∑—É –∏–ª–∏ —Å–ª–æ–≤–æ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä <i>"–í—Å–µ–≥–¥–∞ —Ä–∞–¥—É–π—Ç–µ—Å—å"</i> –∏–ª–∏ –Ω–∞—á–Ω–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–ª—é—á–µ–≤–æ–≥–æ —Å–ª–æ–≤–∞ "–ò—Å–∫–∞—Ç—å" (–¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è: <i>"–ü–æ–∏—Å–∫", "–ù–∞–π—Ç–∏"</i>) <i>"–ò—Å–∫–∞—Ç—å –í—Å–µ–≥–¥–∞ —Ä–∞–¥—É–π—Ç–µ—Å—å"</i>\r\n\r\n    –ü–æ–ª–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ü—Ä–æ—Å—Ç–æ –ë–∏–±–ª–∏—è –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –ø–æ –∞–¥—Ä–µ—Å—É <a href="https://justbible.ru">justbible.ru</a>\r\n\r\n    –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ @pavstyuk',{parse_mode:"HTML",disable_web_page_preview:!0,reply_markup:r})})),bot.api.setMyCommands([{command:"start",description:"–ó–∞–ø—É—Å–∫–∞–µ–º —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–≥–æ –ø–æ–º–æ—â–Ω–∏–∫–∞"},{command:"random",description:"–ë–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–π –æ—Ç—Ä—ã–≤–æ–∫ –∏–∑ –ë–∏–±–ª–∏–∏"},{command:"help",description:"–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –±–æ—Ç–æ–º?"}]),bot.hears([/–ò—Å–∫–∞—Ç—å/,/–∏—Å–∫–∞—Ç—å/,/–ü–æ–∏—Å–∫/,/–ø–æ–∏—Å–∫/,/–ù–∞–π—Ç–∏/,/–Ω–∞–π—Ç–∏/],(async e=>{searching(e)})),bot.hears([/–°–ª—É—à–∞—Ç—å/,/–°–ª—ã—à–∞—Ç—å/,/—Å–ª—É—à–∞—Ç—å/,/—Å–ª—ã—à–∞—Ç—å/,/—Å–ª—ã—à/,/—Å–ª—É—à/,/C–ª—ã—à/,/C–ª—É—à/,/–ê—É–¥–∏–æ/,/–∞—É–¥–∏–æ/,/–∑–∞–ø–∏—Å—å/,/–∑–≤—É–∫/],(async e=>{let r=e.message.text.split(" ");if(r.length>=4)return void await e.reply('–ù–∞–ø–∏—à—Ç–µ –ø—Ä–æ—â–µ –Ω–∞–ø—Ä–∏–º–µ—Ä —Ç–∞–∫: <i>"–°–ª—É—à–∞—Ç—å –ò—Å–∞–π—è 53"</i>',{parse_mode:"HTML"});let t=titlesArr.find((e=>e.toLowerCase().includes(r[1].toLowerCase()))),a=titlesArr.indexOf(t),i=books[a];if(i)if(NaN!=Number(r[2])&&Number(r[2])>0&&Number(r[2])<=chaptersArr[a]){let t,o,s=Number(r[2]);await e.reply(`–í—ã—Å—ã–ª–∞—é –∑–∞–ø–∏—Å—å: ${i} –≥–ª–∞–≤–∞ ${s}`),o=a<10?`0${a+1}`:a+1,t=19===o?s<10?`00${s}`:s<100?`0${s}`:s:s<10?`0${s}`:s;let n=new InputFile(`audio/${o}/${t}.mp3`);await e.replyWithAudio(n,{title:`–ì–ª–∞–≤–∞ ${s}`})}else await e.reply("–£—Ç–æ—á–Ω–∏—Ç–µ –Ω–æ–º–µ—Ä –≥–ª–∞–≤—ã, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞.",{parse_mode:"HTML"});else await e.reply(`–ù–µ –Ω–∞—à–µ–ª –∫–Ω–∏–≥—É: <i>"${r[1]}"</i>`,{parse_mode:"HTML"})})),bot.on("message:text",(async e=>{writeLogFile(e,"read");let r,t,a,i,o=e.message.text.split(" ");const s=(e,r)=>{let t,i;r.includes(":")?(t=Number(r.split(":")[0]),i=r.split(":")[1]):r.includes(".")?(t=Number(r.split(".")[0]),i=r.split(".")[1]):(t=Number(r),i=0);let o=books.indexOf(e);return t>0&&t<=chaptersArr[o]?(a=i,Number(t)):(a=!1,!1)};if((()=>{if(null!=o[0].match(/^[0-9]+$/))if(1===o[0].length){let e=`${o[0]} ${o[1]}`,a=titlesArr.find((r=>r.toLowerCase().includes(e.toLowerCase())));r=books[titlesArr.indexOf(a)],t=!(!r||!o[2])&&s(r,o[2])}else r=!1;else{let e=o[0],a=titlesArr.find((r=>r.toLowerCase().includes(e.toLowerCase())));r=books[titlesArr.indexOf(a)],t=!(!r||!o[1])&&s(r,o[1])}r&&t&&(i="",0===a?(theBibleRBO.forEach((e=>{e.book==r&&Number(e.chapter)===t&&(i+=`${e.verse}. ${e.text} \r\n`)})),i+=`\r\n(${r} ${t})`):(a=(e=>{if(e.length>1){if(e.includes("-")){let r=e.split("-"),t=Number(r[1])-Number(r[0]);if(t>0){let e=[];for(let a=0;a<=t;a++)e.push(Number(r[0])+a);return e}return!1}if(e.includes(",")){let r=e.split(",");return r.sort(((e,r)=>+e-+r)),r.map(Number)}return Number(e)}return Number(e)})(a),"number"==typeof a?theBibleRBO.forEach((e=>{e.book==r&&Number(e.chapter)===t&&Number(e.verse)===a&&(i=""!=e.text?`${e.text}\r\n\r\n(${e.book} ${e.chapter}:${e.verse})`:`<code>–í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –ø–µ—Ä–µ–≤–æ–¥–µ —Å—Ç–∏—Ö <b>${e.book} ${e.chapter}:${e.verse}</b> –∏–º–µ–µ—Ç –¥—Ä—É–≥–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã.</code>`)})):"object"==typeof a?(i="",theBibleRBO.forEach((e=>{e.book==r&&Number(e.chapter)===t&&a.includes(Number(e.verse))&&(""!=e.text?i+=`${e.verse}. ${e.text}\r\n`:i+=`${e.verse}. --\r\n`)})),a[a.length-1]-a[0]==a.length-1?i+=`\r\n(${r} ${t}:${a[0]}-${a[a.length-1]})`:i+=`\r\n(${r} ${t}:${a})`):i=!1))})(),r&&t&&i){if(i.includes("<code>"))return await e.react("ü§î"),void await e.reply(`${i}`,{parse_mode:"HTML"});i.length<4096?(await e.react("üëç"),await e.reply(`<blockquote><em>${i}</em></blockquote>`,{parse_mode:"HTML"})):(await e.react("üëÄ"),await e.reply(`–°–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–∞—è –≥–ª–∞–≤–∞ <b>${r}: ${t}</b>. \r\n–£—Ç–æ—á–Ω–∏—Ç–µ  –∑–∞–ø—Ä–æ—Å.`,{parse_mode:"HTML"}))}else r&&t?(await e.react("üëÄ"),await e.reply(`–ù–µ –º–æ–≥—É –Ω–∞–π—Ç–∏ —Å—Ç–∏—Ö –≤ –≥–ª–∞–≤–µ ${t} –∏–∑ –∫–Ω–∏–≥–∏ ${r}`)):r?(await e.react("üëÄ"),await e.reply(`–ù–µ –º–æ–≥—É –Ω–∞–π—Ç–∏ —É–∫–∞–∑–∞–Ω–Ω—É—é –≥–ª–∞–≤—É –≤ –∫–Ω–∏–≥–µ ${r}`)):searching(e)}));const searching=async e=>{let r,t=e.message.text,a=t.split(" ");["–ò—Å–∫–∞—Ç—å","–∏—Å–∫–∞—Ç—å","–ü–æ–∏—Å–∫","–ø–æ–∏—Å–∫","–ù–∞–π—Ç–∏","–Ω–∞–π—Ç–∏"].includes(a[0])&&(a.shift(),t=a.join(" ")),writeLogFile(e,"search");var i;if(t.length>=3?(i=t,r=[],theBibleRBO.forEach((e=>{e.text.toLowerCase().includes(i.toLowerCase())&&r.push(e)})),r=r):(await e.react("ü§î"),await e.reply(`–°–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π –∑–∞–ø—Ä–æ—Å: <b><i>${t}</i></b>. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —É—Ç–æ—á–Ω–∏—Ç—å...`,{parse_mode:"HTML"})),r&&r.length>0&&r.length<=10)await e.react("üëç"),await e.reply(`\n        –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π: <b>${r.length}</b>, —Å–æ–≥–ª–∞—Å–Ω–æ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É: <b><i>${t}</i></b>.`,{parse_mode:"HTML"}),r.forEach((async r=>{await e.reply(`<blockquote><em>${r.text}</em> \r\n\r\n(${r.book} ${r.chapter}:${r.verse})</blockquote>`,{parse_mode:"HTML"})}));else if(r&&r.length>10){await e.react("ü§Ø"),await e.reply(`\n        –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π: <b>${r.length}</b>, —Å–æ–≥–ª–∞—Å–Ω–æ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É: <b><i>${t}</i></b>. –≠—Ç–æ –º–Ω–æ–≥–æ–≤–∞—Ç–æ —á—Ç–æ–±—ã –≤—ã–≤–µ—Å—Ç–∏ –≤—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ —á–∞—Ç.`,{parse_mode:"HTML"});let a=(new InlineKeyboard).url("–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å–∞–π—Ç...","https://justbible.ru/search.html");await e.reply('–ß—Ç–æ–±—ã –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –ø–æ–∏—Å–∫–∞ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å–∞–π—Ç "–ü—Ä–æ—Å—Ç–æ –ë–∏–±–ª–∏—è"',{parse_mode:"HTML",reply_markup:a})}else await e.react("ü§î"),await e.reply(`–°–æ–≤–ø–∞–¥–µ–Ω–∏–π –Ω–µ—Ç –ø–æ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É: <b><i>${t}:</i></b>. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏—Å–∫–∞—Ç—å –∏–Ω–∞—á–µ...`,{parse_mode:"HTML"})};bot.callbackQuery((async e=>{await e.answerCallbackQuery()})),bot.on(["message:media","message:file"],(async e=>{await e.reply("–ú–Ω–µ –∫–∞–∂–µ—Ç—Å—è, —è –≤–∞—Å –Ω–µ –ø–æ–Ω–∏–º–∞—é... /start",{parse_mode:"HTML"})})),bot.catch((e=>{e.ctx,e.error})),bot.start();